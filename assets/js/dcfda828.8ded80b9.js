"use strict";(self.webpackChunkcodebase_doctor_docs=self.webpackChunkcodebase_doctor_docs||[]).push([[674],{2437:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var i=n(5893),s=n(1151);const a={sidebar_position:1},r="Next.js (App Router)",o={id:"install/javascript/nextjs",title:"Next.js (App Router)",description:"You can install the client library for Next.js to immediately get the full feature set of Catalyst, including:",source:"@site/docs/install/javascript/nextjs.md",sourceDirName:"install/javascript",slug:"/install/javascript/nextjs",permalink:"/docs/install/javascript/nextjs",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Javascript/Typescript",permalink:"/docs/category/javascripttypescript"},next:{title:"SvelteKit",permalink:"/docs/install/javascript/sveltekit"}},l={},c=[{value:"Add the dependency",id:"add-the-dependency",level:2},{value:"Update your Next.js config",id:"update-your-nextjs-config",level:2},{value:"Start Catalyst on the server",id:"start-catalyst-on-the-server",level:2},{value:"Start Catalyst on the client.",id:"start-catalyst-on-the-client",level:2},{value:"Limitations",id:"limitations",level:2}];function d(t){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"nextjs-app-router",children:"Next.js (App Router)"}),"\n",(0,i.jsxs)(e.p,{children:["You can install the client library for ",(0,i.jsx)(e.a,{href:"https://nextjs.org/",children:"Next.js"})," to immediately get the full feature set of Catalyst, including:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Frontend navigation, error reporting, and click tracking"}),"\n",(0,i.jsx)(e.li,{children:"Server logs, request, and error reporting"}),"\n",(0,i.jsx)(e.li,{children:"Session tracking across the stack"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["For other languages and frameworks, checkout our ",(0,i.jsx)(e.a,{href:"/docs/category/install-catalyst",children:"other installation guides"}),"."]}),"\n",(0,i.jsxs)(e.p,{children:["Before you start, you'll need to sign up for Catalyst and have your keys ready, as detailed ",(0,i.jsx)(e.a,{href:"/docs/signup",children:"here"}),"."]}),"\n",(0,i.jsx)(e.h2,{id:"add-the-dependency",children:"Add the dependency"}),"\n",(0,i.jsx)(e.p,{children:"To get started, add the Catalyst dependency:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",metastring:'title="Terminal"',children:"npm install @catalyst-monitor/nextjs@^0.1.1\n\n# Alternatively, if you use Yarn:\nyarn add @catalyst-monitor/nextjs@^0.1.1\n"})}),"\n",(0,i.jsx)(e.h2,{id:"update-your-nextjs-config",children:"Update your Next.js config"}),"\n",(0,i.jsxs)(e.p,{children:["Wrap your existing Next.js configuration with ",(0,i.jsx)(e.code,{children:"withCatalystConfig"}),". This will auto-instrument Catalyst code for your entire Next.js app."]}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.p,{children:["This turns on the ",(0,i.jsx)(e.a,{href:"https://nextjs.org/docs/app/building-your-application/optimizing/instrumentation",children:"instrumentation hook"}),", which is used in the next step."]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",metastring:'title="next.config.mjs"',children:"import * as catalystConfig from \"@catalyst-monitor/nextjs/config\";\n\n/** @type {import('next').NextConfig} */\nexport default catalystConfig.withCatalystConfig({\n  // Strict Mode causes effects to be ran twice.\n  // Since Catalyst sometimes runs in effects, this causes\n  // double-reporting of events.\n  reactStrictMode: false,\n\n  // Your existing Next.JS config...\n});\n"})}),"\n",(0,i.jsx)(e.h2,{id:"start-catalyst-on-the-server",children:"Start Catalyst on the server"}),"\n",(0,i.jsxs)(e.p,{children:["In the ",(0,i.jsx)(e.a,{href:"https://nextjs.org/docs/app/building-your-application/optimizing/instrumentation",children:"instrumentation hook"}),", start and configure Catalyst."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typescript",metastring:'title="instrumentation.ts"',children:'import CatalystNextJS from "@catalyst-monitor/nextjs";\n\nexport async function register() {\n  CatalystNextJS.start({\n    privateKey: "<YOUR PRIVATE KEY HERE>", // The private key from the "Settings" page in the Catalyst dashboard.\n    publicKey: "<YOUR PUBLIC KEY HERE>", // The public key from the "Settings" page.\n    version: "<YOUR VERSION CODE HERE>", // Any string to differentiate different deploys, e.g. Git commit SHA\n    systemName: "catalyst-nextjs-example", // Any string to differentiate this service.\n  });\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"start-catalyst-on-the-client",children:"Start Catalyst on the client."}),"\n",(0,i.jsxs)(e.p,{children:["As soon as possible, add the ",(0,i.jsx)(e.code,{children:"CatalystInstaller"})," component. This component will ensure everything happening client-side is captured. We recommend adding this in the root layout, if possible."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typescript",metastring:'title="app/layout.ts"',children:'import { CatalystInstaller } from "@catalyst-monitor/nextjs/server";\n\nexport default function Layout({ children }: { children: React.ReactNode }) {\n  return (\n    <>\n      <CatalystInstaller />\n      {children}\n    </>\n  );\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"limitations",children:"Limitations"}),"\n",(0,i.jsx)(e.p,{children:"Currently, the Next.JS client library has the following limitations:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Does not support Page Router"}),"\n",(0,i.jsx)(e.li,{children:"Server Actions are not auto-instrumented"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["If you require any of those features, please ",(0,i.jsx)(e.a,{href:"mailto:bill@privium.xyz",children:"get in touch"}),"."]})]})}function p(t={}){const{wrapper:e}={...(0,s.a)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(d,{...t})}):d(t)}},1151:(t,e,n)=>{n.d(e,{Z:()=>o,a:()=>r});var i=n(7294);const s={},a=i.createContext(s);function r(t){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function o(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:r(t.components),i.createElement(a.Provider,{value:e},t.children)}}}]);