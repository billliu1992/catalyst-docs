"use strict";(self.webpackChunkcodebase_doctor_docs=self.webpackChunkcodebase_doctor_docs||[]).push([[453],{2098:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var r=s(5893),a=s(1151);const n={sidebar_position:2},i="Quick Start on Node.js",o={id:"quick-start/quick-install-node",title:"Quick Start on Node.js",description:"For a working example, please checkout our examples repo.",source:"@site/docs/quick-start/quick-install-node.md",sourceDirName:"quick-start",slug:"/quick-start/quick-install-node",permalink:"/quick-start/quick-install-node",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Quick Start on Web",permalink:"/quick-start/quick-install-web"},next:{title:"Guides",permalink:"/category/guides"}},l={},c=[{value:"Initialize the Library",id:"initialize-the-library",level:2},{value:"Record HTTP requests",id:"record-http-requests",level:2},{value:"Propagate Session Info",id:"propagate-session-info",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"quick-start-on-nodejs",children:"Quick Start on Node.js"}),"\n",(0,r.jsxs)(t.p,{children:["For a working example, please checkout our ",(0,r.jsx)(t.a,{href:"https://github.com/catalyst-monitor/catalyst-examples",children:"examples repo"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"initialize-the-library",children:"Initialize the Library"}),"\n",(0,r.jsx)(t.p,{children:"To get started, add the core Javascript library to your Node.js application:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",metastring:'title="Terminal"',children:"npm install @catalyst-monitor/core\n\n# Alternatively, if you use Yarn:\nyarn add @catalyst-monitor/core\n"})}),"\n",(0,r.jsx)(t.p,{children:"Initialize the library as early as possible:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="index.ts"',children:"import { installNodeBase } from '@catalyst-monitor/core'\n\nconst sdf = installNodeBase({\n  privateKey: '<YOUR PRIVATEY KEY HERE>', // The private key from the \"Settings\" page in the Catalyst dashboard.\n  systemName: 'catalyst-js-express-example',\n  version: '<YOUR VERSION CODE HERE>', // Any to differentiate different deploys, e.g. Git commit SHA\n})\n"})}),"\n",(0,r.jsx)(t.h2,{id:"record-http-requests",children:"Record HTTP requests"}),"\n",(0,r.jsx)(t.p,{children:"You can record HTTP requests and their statuses by installing a library for your framework, or manually instrumenting yourself."}),"\n",(0,r.jsxs)(t.p,{children:["Currently, we have a library for ",(0,r.jsx)(t.a,{href:"https://expressjs.com/",children:"Express"}),". If you'd like to use Catalyst with a different library, you can either ",(0,r.jsx)(t.a,{href:"/guides/instrument-node-http",children:"manually instrument yourself"}),", or ",(0,r.jsx)(t.a,{href:"mailto:bill@privium.xyz",children:"reach out to us"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"First, add the package."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",metastring:'title="Terminal"',children:"npm install @catalyst-monitor/express\n"})}),"\n",(0,r.jsx)(t.p,{children:"Afterwards, wrap your code with the library."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="app.ts"',children:"import express from 'express'\nimport {\n  catalystErrorHandler,\n  catalystHandler,\n} from '@catalyst-monitor/express'\n\nconst app = express()\n\n// The Catalyst middleware should be installed as early as possible\n// to propagate any context and capture any logs and errors.\napp.use(catalystHandler)\n\n// YOUR ROUTES HERE!\n\n// The Catalyst error handler should be installed as late as possible\n// to record any uncaught errors.\napp.use(catalystErrorHandler)\n"})}),"\n",(0,r.jsx)(t.h2,{id:"propagate-session-info",children:"Propagate Session Info"}),"\n",(0,r.jsxs)(t.p,{children:["Replace ",(0,r.jsx)(t.code,{children:"fetch(...)"})," calls to servers with Catalyst installed with the provided ",(0,r.jsx)(t.code,{children:"catalystNodeFetch"}),". This will ensure session info is correctly propagated."]}),"\n",(0,r.jsxs)(t.p,{children:["Note that ",(0,r.jsx)(t.code,{children:"catalystNodeFetch"})," has the same interface as ",(0,r.jsx)(t.code,{children:"fetch"}),", so you can simply drop the new function in."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="api.ts"',children:"import { catalystNodeFetch as cFetch } from '@catalyst-monitor/core'\n\nawait cFetch(\"/api/widget/123\", {\n  method: method,\n})\n"})})]})}function p(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>o,a:()=>i});var r=s(7294);const a={},n=r.createContext(a);function i(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);